<!DOCTYPE html>
<!--
	Demonstration of the TI SensorTag JavaScript library.
	Modified to connect with the HANA Cloud Platform

	Date: 10/7/2018
-->
<html>

<head>
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="-1" />
    <meta http-equiv="cache-control" content="no-store" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="css/myCss.css" />
    <link href='https://fonts.googleapis.com/css?family=Roboto' rel='stylesheet'>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<title>TI SensorTag 2.0 Sensors</title>
	<script>
	// Redirect console.log to Evothings Workbench.
	if (window.hyper && window.hyper.log) { console.log = hyper.log }
	</script>
	<script src="cordova.js"></script>
	<script src="libs/jquery/jquery.js"></script>
	<script src="libs/evothings/evothings.js"></script>
    <script src="js/smoothie.js"></script>
	<script src="libs/evothings/tisensortag/tisensortag.js"></script>
    <script src="js/SensorFunctions.js"></script>
    <script src="js/Chart.js"></script>
	</head>
<body class='pageDefault' onload='initialize();' >	
			<!-- <header>
				<button class="menu" onclick=""><img src="ui/images/menu.svg" /></button>
			</header> -->
		<div class="container">
				<div class = "App-Bar">
					<div class="Sensor-Details">
						<p>
							<strong>Bridge Function:</strong> <span id="BridgeStatusData">SensorTag to HCP</span>
						</p>
						<p>
							<strong>Sensors Nearby:</strong> <span id="SensorsNearbyData"></span>
						</p>
						<p>
							<strong>Status:</strong> <span id="StatusData">Ready to connect</span>
						</p>
						<p>
							<strong>Device Info:</strong> <span id="DeviceData"></span>
						</p>
					</div>
					<div  class="restart">
						<button  onClick='location.reload();'>Restart Bridge</button>
					</div>
				</div>
				
					<div class="row">
						<div class="column">
							<div class="live-data">
								<img src="img/icons8-temperature-48.png">
							</div>
							<div class="sensor-name">Temperature</div>
							<span id="TemperatureData">[Waiting for value]</span>
						</div>
						<div class="column">
								<div class="live-data">
									<img src="img/icons8-light-on-48.png">
								</div>
								<div class="sensor-name">Light</div>
								<span id="LuxometerData">[Waiting for value]</span>
						</div>
						<div class="column">
								<div class="live-data">
									<img src="img/icons8-humidity-48.png">						
								</div>
								<div class="sensor-name">Humidity</div>
								<span id="HumidityData">[Waiting for value]</span>
						</div>
						<div class="column">
								<div class="live-data">
									<img src="img/icons8-atmospheric-pressure-48.png">
								</div>
								<div class="sensor-name">Atmospheric Pressure</div>
								<span id="BarometerData">[Waiting for value]</span>
						</div>
					</div>
							
					<div class="row">
							<div class="column">
								<div class="live-data">
									<img src="img/icons8-gyroscope-48.png">
								</div>
								<div class="sensor-name">Gyroscope</div>
								<span id="GyroscopeData">[Waiting for value]</span>
							</div>
							<div class="column">
									<div class="live-data">
										<img src="img/icons8-speed-48.png">
									</div>
									<div class="sensor-name">Accelerometer</div>
									<span id="AccelerometerData">[Waiting for value]</span>
							</div>
							<div class="column">
									<div class="live-data">
										<img src="img/icons8-magnet-48.png">
									</div>
									<div class="sensor-name">Magnetometer</div>
									<span id="MagnetometerData">[Waiting for value]</span>
							</div>
							<div class="column">
									<div class="live-data">
										<img src="img/icons8-gps-signal-48.png">
									</div>
									<div class="sensor-name">Location</div>
									<span id="LocationData">[Waiting for value]</span>
							</div>
					
						</div>
					<div class="list">
						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-temperature-48.png">						
							</div>
							<div class="list-item-details">
								<div>
                                    <canvas id="mycanvas" width="500" height="200"></canvas>
                                    <div>Temperature</div> 
                                    <script>
                                    var smoothie = new SmoothieChart({grid:{fillStyle:'#ffffff',strokeStyle:'#000000'},labels:{fillStyle:'#000000'},minValue:0,maxValue:100,showIntermediateLabels: true});
                                    smoothie.streamTo(document.getElementById("mycanvas"),4000);
                                        var line1 = new TimeSeries();
                                        setInterval(function() {
                                          line1.append(new Date().getTime(), Math.random()*100);
                                        }, 250);
                                        smoothie.addTimeSeries(line1,{lineWidth:2,strokeStyle:'#ff2600'});
                                    </script>
								</div>
							</div>
						</div>

						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-humidity-48.png">						
							</div>
							<div class="list-item-details">
								<div> 
                                    <div id="chartHumid" style="height: 10rem; width: 70%;"></div>
									<!-- <span id="HumidityData">[Waiting for value]</span>
									<div>Humidity</div> -->
								</div>
							</div>
						</div>

						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-light-on-48.png">						
							</div>
							<div class="list-item-details">
								<div>
									<!-- <span id="LuxometerData">[Waiting for value]</span>
									<div>Luxometer</div> -->
								</div>
							</div>
						</div>
						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-atmospheric-pressure-48.png">					
							</div>
							<div class="list-item-details">
								<div>
                                    
                                    
									<!-- <span id="BarometerData">[Waiting for value]</span>
									<div>Barometer</div> -->
								</div>
							</div>
						</div>
						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-speed-48.png">						
							</div>
							<div class="list-item-details">
								<div>
                                    <div id="chartAccel" style="height: 10rem; width: 70%;"></div>
									<!-- <span id="AccelerometerData">[Waiting for value]</span>
									<div>Accelerometer</div> -->
								</div>
							</div>
						</div>

						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-magnet-48.png">						
							</div>
							<div class="list-item-details">
								<div>
									<!-- <span id="MagnetometerData">[Waiting for value]</span>
									<div>Magnetometer</div> -->
								</div>
							</div>
						</div>
						
						<div class="list-item">
							<div class="list-icon">
								<img src="img/icons8-gyroscope-48.png">						
							</div>
							<div class="list-item-details">
								<div>
									<!-- <span id="GyroscopeData">[Waiting for value]</span>
									<div>Gyroscope</div> -->
								</div>
							</div>
						</div>

						<div class="list-item">
								<div class="list-icon">
									<img src="img/icons8-gps-signal-48.png">						
								</div>
								<div class="list-item-details">
									<div >
                                        <canvas id="foo"></canvas>
                                        <script src="http://bernii.github.io/gauge.js/dist/gauge.min.js"></script>
                                        <script>
                                        var opts = {
  angle: -0.2, // The span of the gauge arc
  lineWidth: 0.2, // The line thickness
  radiusScale: 1, // Relative radius
  pointer: {
    length: 0.6, // // Relative to gauge radius
    strokeWidth: 0.035, // The thickness
    color: '#000000' // Fill color
  },
  limitMax: false,     // If false, max value increases automatically if value > maxValue
  limitMin: false,     // If true, the min value of the gauge will be fixed
  colorStart: '#ff0000',
staticZones: [
   {strokeStyle: "#F03E3E", min: 00, max: 500}, // Red from 100 to 130
   {strokeStyle: "#FFDD00", min: 500, max: 1500}, // Yellow
   {strokeStyle: "#30B32D", min: 1500, max: 2000}, // Green
   {strokeStyle: "#FFDD00", min: 2000, max: 2500}, // Yellow
   {strokeStyle: "#F03E3E", min: 2500, max: 3000}  // Red
],  // Colors
  colorStop: '#0000ff',    // just experiment with them
  strokeColor: '#EEEEEE',  // to see which ones work best for you
  generateGradient: true,
  highDpiSupport: true,     // High resolution support
 
};
var target = document.getElementById('foo'); // your canvas element
var gauge = new Gauge(target).setOptions(opts); // create sexy gauge!
gauge.maxValue = 3000; // set max gauge value
gauge.setMinValue(0);  // Prefer setter over gauge.minValue = 0
gauge.animationSpeed = 32; // set animation speed (32 is default value)
gauge.set(1250); // set actual value
 
setInterval(
function(){         
               var val=Math.random() * 3000;
               gauge.set(val);
               }, 1000);
 

                                        </script>
										<!-- <span id="LocationData">[Waiting for value]</span>
										<div>GPS</div> -->
									</div>
								</div>
						</div>

					</div>
				
		</div>
    <script src="js/ChartsFunctions.js"></script>
</body>
</html>
